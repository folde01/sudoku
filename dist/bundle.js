!function(e){var l={};function t(o){if(l[o])return l[o].exports;var n=l[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}t.m=e,t.c=l,t.d=function(e,l,o){t.o(e,l)||Object.defineProperty(e,l,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,l){if(1&l&&(e=t(e)),8&l)return e;if(4&l&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&l&&"string"!=typeof e)for(var n in e)t.d(o,n,function(l){return e[l]}.bind(null,n));return o},t.n=function(e){var l=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(l,"a",l),l},t.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)},t.p="",t(t.s=0)}([function(e,l,t){const o=new(t(1));o.solve(),o.removeValuesFromSolvedBoard(),o.renderEmptyBoard(),o.populateBoard(),o.play()},function(e,l,t){const o=t(2);e.exports=class{constructor(){this.boardSize=9,this.cellValues2D=this.initializeCellValues2D(this.boardSize),this.validMoveCount=0,this.moveAttempts=0,this.numCells=this.boardSize*this.boardSize,this.moves=[],this.cellValueCounts=new Array(this.boardSize+1).fill(0),this.countCompleteCellValues=0,this.completeCellValueCounts=new Array(this.boardSize).fill(this.boardSize),9===this.boardSize&&(this.regionInfo={nw:{startCellX:0,endCellX:2,startCellY:0,endCellY:2,counterpart:"se"},n:{startCellX:3,endCellX:5,startCellY:0,endCellY:2,counterpart:"s"},ne:{startCellX:6,endCellX:8,startCellY:0,endCellY:2,counterpart:"sw"},w:{startCellX:0,endCellX:2,startCellY:3,endCellY:5,counterpart:"e"},c:{startCellX:3,endCellX:5,startCellY:3,endCellY:5,counterpart:"c"},e:{startCellX:6,endCellX:8,startCellY:3,endCellY:5,counterpart:"w"},sw:{startCellX:0,endCellX:2,startCellY:6,endCellY:8,counterpart:"ne"},s:{startCellX:3,endCellX:5,startCellY:6,endCellY:8,counterpart:"n"},se:{startCellX:6,endCellX:8,startCellY:6,endCellY:8,counterpart:"nw"}}),Array.prototype.diff=function(e){return this.filter(function(l){return e.indexOf(l)<0})}}pickRandomElementFromArray(e){return e[Math.floor(Math.random()*e.length)]}randomInt(e,l){const t=Math.ceil(e),o=Math.floor(l);return Math.floor(Math.random()*(o-t+1))+t}initializeCellValues2D(e){let l=new Array(e);for(let t=0;t<e;t++){l[t]=new Array(e);for(let o=0;o<e;o++)l[t][o]=0}return l}getMoves(){return this.moves}setCellValue(e,l,t){this.cellValues2D[l][e]=t}getCellValue(e,l){return this.cellValues2D[l][e]}getCellValueCount(e){return this.cellValueCounts[e]}incrementCellValueCount(e){this.cellValueCounts[e]++,this.cellValueCounts[e]===this.boardSize&&this.countCompleteCellValues++}decrementCellValueCount(e){this.cellValueCounts[e]===this.boardSize&&this.countCompleteCellValues--,this.cellValueCounts[e]--}boardIsComplete(){return this.countCompleteCellValues===this.boardSize}getLastMove(){return 0===this.moves.length?null:this.moves[this.moves.length-1]}tryMove(e){return console.log("trying: "+JSON.stringify(e)),this.moveAttempts++,this.cellIsEmpty(e.cellX,e.cellY)&&this.moveIsValid(e)?(this.setCellValue(e.cellX,e.cellY,e.cellValue),this.validMoveCount++,this.moves.push(e),this.incrementCellValueCount(e.cellValue),console.log("   PLAYED  "+JSON.stringify(e)),!0):(console.log("NOT Played: "+JSON.stringify(e)),!1)}tryMove2(e){return console.log("tryMove2: "+JSON.stringify(e)),this.moveAttempts++,this.setCellValue(e.cellX,e.cellY,e.cellValue),this.validMoveCount++,this.moves.push(e),this.incrementCellValueCount(e.cellValue),this.moveIsValid(e)}undoLastMove(){if(this.moves.length>0){const e=this.moves.pop();return e.deadEnd=!0,this.setCellValue(e.cellX,e.cellY,0),this.decrementCellValueCount(e.cellValue),e.getPreviousMove().deadEndNextMoves.push(e),console.log("###### move undone: "+e.cellX+e.cellY+e.cellValue),e}console.log("no moves left to undo")}makeMoves(e){const l=this;e.forEach(function(e,t){l.tryMove(e)})}cellIsEmpty(e,l){return 0===this.getCellValue(e,l)}getEmptyCellsInColumn(e){let l=[];for(let t=0;t<this.boardSize;t++)this.cellIsEmpty(e,t)&&l.push(t);return console.log("========= EMPTY ======== "+l),l}columnContainsCellValue(e,l){for(let t=0;t<this.boardSize;t++)if(l===this.getCellValue(e,t))return!0;return!1}getCurrentBoardValues(){return[].concat.apply([],this.cellValues2D)}solve(){this.solveByPickingRandomPossibleNextMove()}getPossibleNextMoves(e){let l=[];for(let t=0;t<this.boardSize;t++)t!=e.cellY&&l.push(t);let t=e.cellValue;if(this.getCellValueCount(t)===this.boardSize&&(++t,this.getCellValueCount(t)===this.boardSize))throw"Unexpected cell value count. Terminating.";const n=e.deadEndNextMoves.map(e=>e.cellY);let s=(e.cellX+1)%this.boardSize;return l.diff(n).map(e=>new o(s,e,t))}solveByPickingRandomPossibleNextMove(){console.log("****************SOLVING***************");let e=this.getLastMove(),l=null;for(l=e?e.cellValue:1;this.getCellValueCount(l)<this.boardSize&&!this.boardIsComplete();){(e=this.getLastMove())||(e=new o(-1,-1,l));let t=this.getPossibleNextMoves(e),n=!1;for(;!n;){0===t.length&&(console.log("   BLOCKED"),this.undoLastMove(),e=this.getLastMove(),t=this.getPossibleNextMoves(e)),console.log("possibleNextMoves: length="+t.length+" "+JSON.stringify(t));const o=this.pickRandomElementFromArray(t);(n=this.tryMove(o))?(o.setPreviousMove(e),l<this.boardSize&&l++):t.splice(t.indexOf(o),1)}}}removeValueFromCell(e,l){return 0!==this.getCellValue(e,l)&&(this.setCellValue(e,l,0),!0)}removeValuesFromSolvedBoard(){let e=this.boardSize*this.boardSize;const l=this.removeValuesFromCenterRegion(),t=this.boardSize-l,o=(e-=l)%2==0?35:34,n=Math.floor((o-t)/2);console.log("clueCountTargetForOneSide: "+n);const s=["nw","w","sw","s"];let r={nw:0,w:0,sw:0,s:0};const i=this;for(s.forEach(function(e){i.removeRandomClueFromRegionAndItsCounterpart(e),r[e]++}),e-=2*s.length;e>o;){const l=s[Math.floor(Math.random()*s.length)];r[l]<this.boardSize-1&&(this.removeRandomClueFromRegionAndItsCounterpart(l),r[l]++,e-=2)}}rotate(e){let l=-1;switch(e){case 0:l=2;break;case 1:l=1;break;case 2:l=0}return l}removeRandomClueFromRegionAndItsCounterpart(e){const l=this;let t=new Set,o=!1;for(;!o&&t.size<this.boardSize;){const n=this.regionInfo[e],s=n.startCellX,r=n.endCellX,i=n.startCellY,a=n.endCellY,c=n.counterpart,u=this.randomInt(s,r),h=this.randomInt(i,a);t.add(u.toString()+h.toString()),o=l.removeValueFromCell(u,h),console.log("removed: "+o);const d=this.regionInfo[c],C=d.startCellX,m=(d.endCellX,d.startCellY),g=(d.endCellY,this.rotate(u%3)+C),f=this.rotate(h%3)+m;l.removeValueFromCell(g,f)}return o}removeValuesFromCenterRegion(){let e={"nw-se":[{cellX:3,cellY:3},{cellX:5,cellY:5}],"sw-ne":[{cellX:3,cellY:5},{cellX:5,cellY:3}],"e-w":[{cellX:3,cellY:4},{cellX:5,cellY:4}],"n-s":[{cellX:4,cellY:3},{cellX:4,cellY:5}],c:[{cellX:4,cellY:4}]};const l=Object.keys(e);let t=[],o=!0,n=!0;for(let e=0;e<l.length;e++){const l=Math.random()>=.5;t[e]=l,l?n=!1:o=!1}if(n||o){console.log("CENTER BOX MISTAKE"),console.log("BEFORE: "+t);const e=this.randomInt(0,l.length-1);console.log("randIndex: "+e),t[e]=!t[e],console.log("FIXED: "+t)}const s=this;let r=0;for(let o=0;o<l.length;o++){const n=t[o],i=l[o];console.log(n+" "+i),n&&e[i].forEach(function(e,l){s.removeValueFromCell(e.cellX,e.cellY),++r})}return r}solveByPickingRandomEmptyCellFromColumn(){for(;!this.boardIsComplete();){console.log("****************SOLVING***************     ");let e=null,l=null;for(let t=this.moves.slice(-1)[0].cellValue;t<=this.boardSize;t++)if(e&&(t=e,e=null),l||(l=this.getCellValueCount(t)),l!==this.boardSize){console.log("working on cellValue: "+t);for(let e=0;e<this.boardSize;e++){if(this.columnContainsCellValue(e,t))continue;const l=board.getEmptyCellsInColumn(e);let n=!0;for(;n&&l.length>0;){const s=l[Math.floor(Math.random()*l.length)],r=l.indexOf(s);l.splice(l.indexOf(r),1);const i=new o(e,s,t);this.tryMove(i)&&(n=!1)}}this.getCellValueCount(t)<=l&&(console.log("- - B L O C K E D - -"),this.undoLastMove(),e=t)}else console.log("DONE with cellValue: "+t);console.log("^^^^^ MOVE ATTEMPTS ^^^^^ "+this.moveAttempts)}}solveByIteratingDownEachColumn(){let e=0;for(;!this.boardIsComplete();){console.log("****************SOLVING***************     "+e),console.log("complete? "+this.boardIsComplete()),++e;let l=null;for(let e=1;e<=boardSize;e++){if(l&&(e=l,l=null),this.getCellValueCount(e)===boardSize){console.log("DONE with cellValue: "+e);continue}console.log("working on cellValue: "+e);const t=this.getCellValueCount(e);for(let l=0;l<boardSize;l++)for(let t=0;t<boardSize;t++){const n=new o(l,t,e);this.tryMove(n)}this.getCellValueCount(e)===t&&(console.log("- - B L O C K E D - -"),this.undoLastMove(),l=e)}console.log("complete NOW? "+this.boardIsComplete())}}getSolutionArray(){this.getSolutionArrayRandom()}getSolutionArrayRandom(){for(;this.moveAttempts<2e3;){const e=new o;this.tryMove(e)}return console.log("DONE: "+this.cellValues2D),console.log("ATTEMPTS: "+this.moveAttempts),console.log("FILLED: "+this.validMoveCount),this.cellValues2D}moveIsValid(e){let l=!1;return 9===this.boardSize?l=this.rowIsValid(e)&&this.columnIsValid(e)&&this.regionIsValid(e):boardSize<9&&(l=this.rowIsValid(e)&&this.columnIsValid(e)),console.log("moveIsValid: "+l),l}rowIsValid(e){let l=!0;for(let t=0;t<this.boardSize;t++)console.log("rowIsValid - xy: "+t+e.cellY),0!==this.getCellValue(t,e.cellY)&&this.getCellValue(t,e.cellY)===e.cellValue&&(l=!1);return console.log("rowIsValid: "+l),l}columnIsValid(e){let l=!0;for(let t=0;t<this.boardSize;t++)0!==this.getCellValue(e.cellX,t)&&this.getCellValue(e.cellX,t)===e.cellValue&&(l=!1);return console.log("columnIsValid: "+l),l}regionIsValid(e){let l=!0;const t=3*Math.floor(e.cellY/3),o=t+2,n=3*Math.floor(e.cellX/3),s=n+2;for(let r=t;r<=o;r++)for(let t=n;t<=s;t++)0!==this.getCellValue(t,r)&&this.getCellValue(t,r)===e.cellValue&&(l=!1);return console.log("regionIsValid: "+l),l}play(){const e=this.boardSize,l=document.querySelectorAll(".cell"),t=document.querySelectorAll(".inputCell");t.forEach(function(e,l){l<t.length-1&&(e.innerText=(l+1).toString())});const n=document.querySelector(".inputTable");let s=null;const r=this;l.forEach(function(i,a){const c=a%e,u=Math.floor(a/e);0===r.getCellValue(c,u)&&i.addEventListener("click",function(){null!==s&&l[s].classList.remove("activeCell"),l[s=a].classList.add("activeCell"),n.classList.add("inputTableActive"),t.forEach(function(e,l){const s=e.innerText,a=Number(s);e.onclick=function(){const e=new o(c,u,a);r.tryMove2(e)?i.classList.remove("invalidMove"):(console.log("INVALID MOVE"),i.classList.add("invalidMove")),i.innerText=s,i.classList.remove("activeCell"),n.classList.remove("inputTableActive"),t.forEach(function(e,l){e.onclick=function(){return!1}})}})})})}renderEmptyBoard(){const e=this.boardSize,l=document.querySelector(".board");for(let t=0;t<e;t++){const t=document.createElement("tr");t.setAttribute("class","row"),l.appendChild(t);for(let l=0;l<e;l++){const e=document.createElement("td");e.setAttribute("class","cell"),t.appendChild(e)}}9===e&&(document.querySelectorAll(".row:nth-child(3) .cell, .row:nth-child(6) .cell").forEach(function(e,l){e.classList.add("specialBottomBorder")}),document.querySelectorAll(".cell:nth-child(3), .cell:nth-child(6)").forEach(function(e,l){e.classList.add("specialRightBorder")}))}populateBoard(){const e=document.querySelectorAll(".cell"),l=(document.querySelectorAll(".row"),this),t=this.boardSize;e.forEach(function(e,o){const n=o%t,s=Math.floor(o/t),r=l.getCellValue(n,s);let i=null;0===r?i="":(i=r.toString(),e.classList.add("clueCell")),e.innerText=i})}}},function(e,l){e.exports=class{constructor(e,l,t,o){this.previousMove=null,this.isDeadEnd=!1,this.deadEndNextMoves=[],arguments.length<3?(this.cellX=this._getRandomInt(0,boardSize-1),this.cellY=this._getRandomInt(0,boardSize-1),this.cellValue=this._getRandomInt(1,boardSize)):arguments.length>=3&&(this.cellX=e,this.cellY=l,this.cellValue=t),4===arguments.length&&(this.previousMove=o),console.log("MOVE CREATED: "+this.cellX+", "+this.cellY+", "+this.cellValue)}setPreviousMove(e){this.previousMove=e}getPreviousMove(){return this.previousMove}_getRandomInt(e,l){return e=Math.ceil(e),l=Math.floor(l),Math.floor(Math.random()*(l-e+1))+e}}}]);