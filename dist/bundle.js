!function(e){var t={};function l(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,l),s.l=!0,s.exports}l.m=e,l.c=t,l.d=function(e,t,o){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(l.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)l.d(o,s,function(t){return e[t]}.bind(null,s));return o},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=4)}([function(e,t){e.exports={boardSize:9,boxInfo:{nw:{startCellX:0,endCellX:2,startCellY:0,endCellY:2,counterpart:"se"},n:{startCellX:3,endCellX:5,startCellY:0,endCellY:2,counterpart:"s"},ne:{startCellX:6,endCellX:8,startCellY:0,endCellY:2,counterpart:"sw"},w:{startCellX:0,endCellX:2,startCellY:3,endCellY:5,counterpart:"e"},c:{startCellX:3,endCellX:5,startCellY:3,endCellY:5,counterpart:"c"},e:{startCellX:6,endCellX:8,startCellY:3,endCellY:5,counterpart:"w"},sw:{startCellX:0,endCellX:2,startCellY:6,endCellY:8,counterpart:"ne"},s:{startCellX:3,endCellX:5,startCellY:6,endCellY:8,counterpart:"n"},se:{startCellX:6,endCellX:8,startCellY:6,endCellY:8,counterpart:"nw"}}}},function(e,t,l){const o=l(0);e.exports=class{constructor(){this._boardSize=9,this._cellDB=this._initialize(),this._boxInfo=o.boxInfo,this._cellValueCounts=new Array(this._boardSize+1).fill(0),this._countCompleteCellValues=0,this._filledCellCount=0,this._playOrder=[],this._gameHasStarted=!1}getFilledCellCount(){return this._filledCellCount}startGame(){this._gameHasStarted=!0}_gameIsInProgress(){return this._gameHasStarted}_addPlay(e,t){this._gameIsInProgress()&&(this._playOrder.push(e.toString()+"-"+t.toString()),console.log(this.getPlayOrder()))}removeLastPlay(){if(this._gameIsInProgress())return this._playOrder.pop()}_removePlay(e,t){if(!this._gameIsInProgress())return;const l=this._playOrder,o=l.indexOf(e.toString()+"-"+t.toString());o>-1&&l.splice(o,1),console.log(this.getPlayOrder())}getPlayOrder(){return this._playOrder}setCellValue(e,t,l){const o=this.getCellValue(e,t);this._cellDB[t][e].cellValue=l,0===o&&l>0?(this._filledCellCount++,this._addPlay(e,t)):o>0&&0===l&&(this._filledCellCount--,this._removePlay(e,t))}getCellValue(e,t){return this._cellDB[t][e].cellValue}getRowValues(e){return this._cellDB[e].map(e=>e.cellValue)}getColumnValues(e){let t=[];for(let l=0;l<this._boardSize;l++)t.push(this._cellDB[l][e].cellValue);return t}getBoxValues(e){let t=[];const l=this._boxInfo[e];for(let e=l.startCellX;e<=l.endCellX;e++)for(let o=l.startCellY;o<=l.endCellY;o++)t.push(this.getCellValue(e,o));return t}setCellClueStatus(e,t,l){this._cellDB[t][e].isClue=l}getCellClueStatus(e,t){return this._cellDB[t][e].isClue}cellIsEmpty(e,t){return 0===this.getCellValue(e,t)}getConflictStatus(e,t){return this._cellDB[t][e].conflicting}setConflictStatus(e,t,l){this._cellDB[t][e].conflicting=l}getBoxInfo(){return this._boxInfo}getCellValueCount(e){return this._cellValueCounts[e]}incrementCellValueCount(e){this._cellValueCounts[e]++,this._cellValueCounts[e]===this._boardSize&&this._countCompleteCellValues++}decrementCellValueCount(e){this._cellValueCounts[e]===this._boardSize&&this._countCompleteCellValues--,this._cellValueCounts[e]--}getCompleteCellValueCount(){return this._countCompleteCellValues}rowIsValid(e){for(let t=0;t<this._boardSize;t++)if(t!==e.getCellX()&&!this.cellIsEmpty(t,e.getCellY())&&this.getCellValue(t,e.getCellY())===e.getCellValue())return!1;return!0}boxIsValid(e){let t=!0;const l=3*Math.floor(e.getCellY()/3),o=l+2,s=3*Math.floor(e.getCellX()/3),n=s+2;for(let i=l;i<=o;i++)for(let l=s;l<=n;l++)0!==this.getCellValue(l,i)&&this.getCellValue(l,i)===e.cellValue&&(t=!1);return t}columnIsValid(e){let t=!0;for(let l=0;l<this._boardSize;l++)0!==this.getCellValue(e.getCellX(),l)&&this.getCellValue(e.getCellX(),l)===e.getCellValue()&&(t=!1);return t}_initialize(){const e=this._boardSize;let t=new Array(e);for(let l=0;l<e;l++){t[l]=new Array(e);for(let o=0;o<e;o++)t[l][o]={cellValue:0,conflicting:!1,isClue:!0,solutionValue:null,eventListener:{event:null,fn:null}}}return t}}},function(e,t,l){const o=l(3);e.exports=class{constructor(e,t,l,o){this._previousMove=null,this._isDeadEnd=!1,this._deadEndNextMoves=[],arguments.length<3?(this.cellX=this._getRandomInt(0,boardSize-1),this.cellY=this._getRandomInt(0,boardSize-1),this.cellValue=this._getRandomInt(1,boardSize)):arguments.length>=3&&(this.cellX=e,this.cellY=t,this.cellValue=l),4===arguments.length&&(this._previousMove=o)}setPreviousMove(e){this._previousMove=e}getPreviousMove(){return this._previousMove}getDeadEndNextMoves(){return this._deadEndNextMoves}addDeadEndNextMove(e){this._deadEndNextMoves.push(e)}getCellValue(){return this.cellValue}getCellX(){return this.cellX}getCellY(){return this.cellY}_getRandomInt(e,t){return o.getRandomInt(e,t)}}},function(e,t){const l={getRandomInt:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}};e.exports=l},function(e,t,l){const o=l(5),s=l(8),n=(console.log,new s);let i;window.addEventListener("click",(function(e){(e.target.classList.contains("newGame")||e.target.classList.contains("gameOver"))&&(i=new o(n),i.play())})),i=new o(n),i.play()},function(e,t,l){const o=l(1),s=l(6),n=l(0);console.log;e.exports=class{constructor(e){this._boardSize=n.boardSize,this._numCells=this._boardSize*this._boardSize,this._reset(),this._board=e,this._boxInfo=n.boxInfo}play(){const e=new s;e.solve();const t=e.getCellDB();this._setCellDB(t),this.populateBoard();this._boardSize;this._board.play(this)}getCellDB(){return this.cellDB}populateBoard(){this._board.populate(this.cellDB)}userHasSolvedPuzzle(){const e=this._boardSize;if(this.cellDB.getFilledCellCount()!==e*e)return!1;for(let t=0;t<e;t++){const l=new Set(this.cellDB.getRowValues(t)),o=new Set(this.cellDB.getColumnValues(t));if(l.size!==e||o.size!==e)return!1}for(let t in this._boxInfo)if(this._boxInfo.hasOwnProperty(t)){if(new Set(this.cellDB.getBoxValues(t)).size!==e)return!1}return!0}getConflictingCellIndex(){return this._board.getConflictingCellIndex()}setConflictingCellIndex(e){this._board.setConflictingCellIndex(e)}playInCell(e,t,l){this.cellDB.setCellValue(e,t,0),this.cellDB.setCellValue(e,t,l),this.cellDB.incrementCellValueCount(l)}highlightIfConflicting(e,t,l){let o=!1;const s=this._boardSize;for(let n=0;n<s;n++)if(n!==e&&this.cellDB.getCellValue(n,t)===l){o=!0;break}if(o)return void this._setBoardConflict(e,t,!0);for(let n=0;n<s;n++)if(n!==t&&this.cellDB.getCellValue(e,n)===l){o=!0;break}if(o)return void this._setBoardConflict(e,t,!0);const n=this._getBoxCorners(e,t);for(let s=n.startColumn;s<=n.endColumn&&!o;s++)for(let i=n.startRow;i<n.endRow;i++)if((s!==e||i!==t)&&this.cellDB.getCellValue(s,i)===l){o=!0;break}o&&this._setBoardConflict(e,t,!0)}removeAllConflicts(){for(let e=0;e<this._boardSize;e++)for(let t=0;t<this._boardSize;t++)this._setBoardConflict(t,e,!1)}_setBoardConflict(e,t,l){if(this.cellDB.getConflictStatus(e,t)!==l)if(this.cellDB.setConflictStatus(e,t,l),!0===l)try{this._addConflictHighlighting(e,t)}catch(e){throw"setConflictStatus caught exception: "+e}else this._removeConflictHighlighting(e,t)}_setCellDB(e){e.startGame(),this.cellDB=e}_getBoxCorners(e,t){const l=3*Math.floor(t/3),o=l+2,s=3*Math.floor(e/3);return{startRow:l,endRow:o,startColumn:s,endColumn:s+2}}_removeConflictHighlighting(e,t){!0!==this.cellDB.getCellClueStatus(e,t)&&this._board.removeConflictHighlighting(e,t)}_reset(){this.cellDB=new o}_addConflictHighlighting(e,t){!0!==this.cellDB.getCellClueStatus(e,t)&&this._board.addConflictHighlighting(e,t)}}},function(e,t,l){const o=l(1),s=(l(2),l(7)),n=l(3),i=l(0);console.log;e.exports=class{constructor(e=new s){this._solver=e,this._boardSize=i.boardSize,this._cellDB=new o,this._solver.setCellDB(this._cellDB),this._boxInfo=i.boxInfo}getCellDB(){return this._cellDB}puzzleIsComplete(){return this._solver.puzzleIsComplete()}tryMove(e){return this._solver.tryMove(e)}solve(){this._solver.solve(),this._removeCluesFromSolvedBoard()}_removeClue(e,t){return 0!==this._cellDB.getCellValue(e,t)&&(this._cellDB.setCellValue(e,t,0),this._cellDB.setCellClueStatus(e,t,!1),!0)}_randomInt(e,t){return n.getRandomInt(e,t)}_removeCluesFromSolvedBoard(e){let t;t="dev"===e?this._removeOneClueFromSolvedBoard:this._removeCluesFromSolvedBoardMediumDifficulty,t.call(this)}_removeOneClueFromSolvedBoard(){this._removeClue(0,0)}_removeCluesFromSolvedBoardMediumDifficulty(){let e=this._boardSize*this._boardSize;const t=this._removeValuesFromCenterBox(),l=this._boardSize-t;e-=t;const o=e%2==0?35:34,s=(Math.floor((o-l)/2),["nw","w","sw","s"]);let n={nw:0,w:0,sw:0,s:0};const i=this;for(s.forEach((function(e){i._removeRandomClueFromBoxAndItsCounterpart(e),n[e]++})),e-=2*s.length;e>o;){const t=s[Math.floor(Math.random()*s.length)];n[t]<this._boardSize-1&&(this._removeRandomClueFromBoxAndItsCounterpart(t),n[t]++,e-=2)}}_rotate(e){let t=-1;switch(e){case 0:t=2;break;case 1:t=1;break;case 2:t=0}return t}_removeRandomClueFromBoxAndItsCounterpart(e){const t=this;let l=new Set,o=!1;for(;!o&&l.size<this._boardSize;){const s=this._boxInfo[e],n=s.startCellX,i=s.endCellX,r=s.startCellY,a=s.endCellY,c=s.counterpart,u=this._randomInt(n,i),h=this._randomInt(r,a);l.add(u.toString()+h.toString()),o=t._removeClue(u,h);const d=this._boxInfo[c],C=d.startCellX,_=(d.endCellX,d.startCellY),g=(d.endCellY,this._rotate(u%3)+C),m=this._rotate(h%3)+_;t._removeClue(g,m)}return o}_removeValuesFromCenterBox(){let e={"nw-se":[{cellX:3,cellY:3},{cellX:5,cellY:5}],"sw-ne":[{cellX:3,cellY:5},{cellX:5,cellY:3}],"e-w":[{cellX:3,cellY:4},{cellX:5,cellY:4}],"n-s":[{cellX:4,cellY:3},{cellX:4,cellY:5}],c:[{cellX:4,cellY:4}]};const t=Object.keys(e);let l=[],o=!0,s=!0;for(let e=0;e<t.length;e++){const t=Math.random()>=.5;l[e]=t,t?s=!1:o=!1}if(s||o){const e=this._randomInt(0,t.length-1);l[e]=!l[e]}const n=this;let i=0;for(let o=0;o<t.length;o++){const s=l[o],r=t[o];s&&e[r].forEach((function(e,t){n._removeClue(e.cellX,e.cellY),++i}))}return i}}},function(e,t,l){const o=l(2),s=l(0);console.log;e.exports=class{constructor(){this._moves=[],this._boardSize=s.boardSize,this._moveAttempts=0,this._validMoveCount=0,Array.prototype.diff=function(e){return this.filter((function(t){return e.indexOf(t)<0}))}}setCellDB(e){this._cellDB=e}solve(){this._solveByPickingRandomPossibleNextMove()}moveIsValid(e){return this.rowIsValid(e)&&this.columnIsValid(e)&&this.boxIsValid(e)}rowIsValid(e){return this._cellDB.rowIsValid(e)}boxIsValid(e){return this._cellDB.boxIsValid(e)}columnIsValid(e){return this._cellDB.columnIsValid(e)}puzzleIsComplete(){return this._cellDB.getCompleteCellValueCount()===this._boardSize}tryMove(e){return this._moveAttempts++,!(!this._cellDB.cellIsEmpty(e.getCellX(),e.getCellY())||!this.moveIsValid(e))&&(this._cellDB.setCellValue(e.getCellX(),e.getCellY(),e.getCellValue()),this._validMoveCount++,this._moves.push(e),this._cellDB.incrementCellValueCount(e.getCellValue()),!0)}_solveByPickingRandomPossibleNextMove(){let e=this._getLastMove(),t=null;for(t=e?e.getCellValue():1;this._cellDB.getCellValueCount(t)<this._boardSize&&!this.puzzleIsComplete();){e=this._getLastMove(),e||(e=new o(-1,-1,t));let l=this._getPossibleNextMoves(e),s=!1;for(;!s;){0===l.length&&(this._undoLastMove(),e=this._getLastMove(),l=this._getPossibleNextMoves(e));const o=this._pickRandomElementFromArray(l);s=this.tryMove(o),s?(o.setPreviousMove(e),t<this._boardSize&&t++):l.splice(l.indexOf(o),1)}}}_getLastMove(){return 0===this._moves.length?null:this._moves[this._moves.length-1]}_getPossibleNextMoves(e){let t=[];for(let l=0;l<this._boardSize;l++)l!=e.getCellY()&&t.push(l);let l=e.getCellValue();if(this._cellDB.getCellValueCount(l)===this._boardSize&&(++l,this._cellDB.getCellValueCount(l)===this._boardSize))throw"Unexpected cell value count. Terminating.";const s=e.getDeadEndNextMoves().map(e=>e.cellY);let n=(e.getCellX()+1)%this._boardSize;return t.diff(s).map(e=>new o(n,e,l))}_undoLastMove(){if(this._moves.length>0){const e=this._moves.pop();return e.deadEnd=!0,this._cellDB.setCellValue(e.getCellX(),e.getCellY(),0),this._cellDB.decrementCellValueCount(e.getCellValue()),e.getPreviousMove().addDeadEndNextMove(e),e}}_pickRandomElementFromArray(e){return e[Math.floor(Math.random()*e.length)]}}},function(e,t,l){const o=console.log,s=l(0);e.exports=class{constructor(){this._boardSize=s.boardSize,this._domCache={logo:document.querySelector("#logo"),board:document.querySelector("#board"),inputTable:document.querySelector(".inputTable"),inputCells:document.querySelectorAll(".inputCell"),newGameButton:document.querySelector(".newGame"),rows:document.querySelectorAll(".row"),gameOver:document.querySelector(".gameOver"),overlay:document.querySelector(".overlay")},this._domCache.cellsXY=this._draw(),this._domCache.cells=document.querySelectorAll(".cell"),this._conflictingCellIndex={index:null},this._boxInfo=s.boxInfo,this._activeCellIndex=null}getConflictingCellIndex(){return this._conflictingCellIndex.index}setConflictingCellIndex(e){this._conflictingCellIndex.index=e}addConflictHighlighting(e,t){try{this._getDomCell(e,t).classList.add("invalidMove");const l=this.getCellIndexFromCoords(e,t);this.setConflictingCellIndex(l)}catch(e){throw"addConflictHighlighting caught exception: "+e}}removeConflictHighlighting(e,t){try{this._getDomCell(e,t).classList.remove("invalidMove"),this.setConflictingCellIndex(null)}catch(e){throw"removeConflictHighlighting caught exception: "+e}}getCellIndexFromCoords(e,t){return this._boardSize*t+e}populate(e){this._clearBoard();const t=this._domCache.cells;this._domCache.rows,this._boardSize;t.forEach(function(t,l){const o=this.getCellX(l),s=this.getCellY(l),n=e.getCellValue(o,s);let i=null;0===n?i="":(i=n.toString(),t.classList.add("clueCell")),t.innerText=i}.bind(this))}getCellX(e){return e%this._boardSize}getCellY(e){return Math.floor(e/this._boardSize)}_drawInCell(e,t,l){const o=this._getCellID(e,t);0===l&&(l=""),console.log("cellID:",o),document.querySelector("#"+o).innerText=l}play(e){this._game=e;const t=this._domCache.cells,l=this._domCache.inputCells,o=this._domCache.inputTable;let s=this._activeCellIndex;const n=this;t.forEach((function(i,r){const a=n.getCellX(r),c=n.getCellY(r);0===e.cellDB.getCellValue(a,c)&&(i.onclick=function(){e.removeAllConflicts(),null!==s&&t[s].classList.remove("activeCell"),s=r,t[s].classList.add("activeCell"),o.classList.add("inputTableActive"),l.forEach((function(t,l){let o,s=t.innerText;isNaN(s)?(o=0,s=""):o=Number(s),t.onclick=function(){e.playInCell(a,c,o),e.highlightIfConflicting(a,c,o),n._drawInCell(a,c,o),i.classList.remove("activeCell"),this._setBackButton(),this._deactivateKeypads(),e.userHasSolvedPuzzle()&&this._doGameOver()}.bind(n)}))})}))}_setBackButton(){const e=this._domCache.backButton,t=this;this._game&&this._game.getCellDB().getPlayOrder().length>0?(e.classList.add("backButtonHighlighted"),e.onclick=function(){const e=t._game.getCellDB().removeLastPlay();if(!e)return;const l=e.split("-").map(e=>Number(e));this._drawInCell(l[0],l[1],0),o("count:",t._game.getCellDB().getPlayOrder().length),0==t._game.getCellDB().getPlayOrder().length&&(o("yoda"),t._deactivateBackButton())}.bind(this)):this._deactivateBackButton()}_clearBoard(){this._hideGameOver(),this._deactivateKeypads(),this._deactivateBackButton(),this._clearCells(),this._addCheckerBoard()}_hideGameOver(){this._domCache.overlay.style.display="none"}_deactivateKeypads(){this._domCache.inputTable.classList.remove("inputTableActive"),this._domCache.inputCells.forEach((function(e,t){e.onclick=null}))}_deactivateBackButton(){const e=this._domCache.backButton;e.classList.remove("backButtonHighlighted"),e.onclick=null}_clearCells(){this._domCache.cells.forEach((function(e){e.classList.remove("clueCell"),e.classList.remove("activeCell"),e.classList.remove("invalidMove"),e.onclick=null}))}_getDomCell(e,t){const l=this._boardSize,o="#cell"+e+t;if(isNaN(e)||isNaN(t)||e>l-1||e<0||t>l-1||t<0)throw"getDomCell: unexpected cell coordinate. (cellX, cellY): "+e+", "+t;return this._domCache.cellsXY[o]}_addCheckerBoard(){["n","s","e","w"].forEach(function(e,t){const l=this._boxInfo[e];for(let e=l.startCellX;e<=l.endCellX;e++)for(let t=l.startCellY;t<=l.endCellY;t++)this._getDomCell(e,t).classList.add("checkerboardBoxCell")}.bind(this))}_doGameOver(){this._domCache.overlay.style.display="block"}_getCellID(e,t){return"cell"+e+t}_draw(){const e=this._domCache,t=this._boardSize,l={},o=document.createElement("ul");o.setAttribute("id","logo");const s="  SUDOKU ".split("");for(let e=0;e<9;e++){const t=document.createElement("li");t.innerText=s[e],o.appendChild(t)}const n=document.createElement("li");n.innerText="New game",n.setAttribute("class","newGame"),o.appendChild(n);const i=e.logo;i.parentNode.replaceChild(o,i);const r=document.createElement("li");r.innerText="Back",r.setAttribute("class","backBtn");const a=document.querySelector("#logo li");a.parentNode.replaceChild(r,a),e.backButton=r;const c=e.board,u=document.createElement("table");u.setAttribute("id","board");for(let e=0;e<t;e++){const o=document.createElement("tr");o.setAttribute("class","row"),u.appendChild(o);for(let s=0;s<t;s++){const t=document.createElement("td");t.setAttribute("class","cell");const n=this._getCellID(s,e);t.setAttribute("id",n),l["#"+n]=t,o.appendChild(t)}}c.parentNode.replaceChild(u,c);const h=document.createElement("ul");h.setAttribute("class","inputTable");for(let e=0;e<t;e++){const t=document.createElement("li");t.innerText=(e+1).toString(),t.setAttribute("class","inputCell"),h.appendChild(t)}const d=document.createElement("li");d.setAttribute("id","eraseBtn"),d.setAttribute("class","inputCell"),d.innerText="Erase",h.appendChild(d);const C=e.inputTable;return C.parentNode.replaceChild(h,C),e.inputCells=document.querySelectorAll(".inputCell"),e.inputTable=h,l}}}]);